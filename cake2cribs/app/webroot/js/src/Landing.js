// Generated by CoffeeScript 1.3.3
(function() {
  var __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  A2Cribs.Landing = (function() {

    function Landing() {}

    Landing.Init = function(locations) {
      var location, that, _i, _len;
      this.schoolList = Array();
      this.cityList = Array();
      for (_i = 0, _len = locations.length; _i < _len; _i++) {
        location = locations[_i];
        this.schoolList.push(location.School.school_name);
        this.cityList.push(location.School.city);
      }
      that = this;
      return $(function() {
        return $(".typeahead").typeahead({
          source: that.schoolList.concat(that.cityList)
        });
      });
    };

    Landing.Submit = function() {
      var index, location;
      location = $("#search-text").val();
      index = __indexOf.call(this.cityList, location) >= 0;
      if (__indexOf.call(this.cityList, location) >= 0) {
        location = this.schoolList[this.cityList.indexOf(location)];
      } else if (__indexOf.call(this.schoolList, location) < 0) {
        alert(location + " is not a valid location.");
        return;
      }
      return window.location = "/map/sublet/" + location.split(' ').join('_');
    };

    return Landing;

  })();

}).call(this);
